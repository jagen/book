# 数据的存储结构和特征

## 1.1 表和索引分离型

所谓的表和索引分离型的存储结构其实就是堆表，即用来存储数据的表和为了快速查找特定数据而使用的索引完全作为不同的对象来存储。

从代价的角度来分析，由于需要执行两次查找，即键的查找和数据的查找，必然会存在额外的代价。

使用键和数据分离的方法在存储数据时不会受到索引的任何影响，从这一角度来看，又在很大程度上减少了代价的支出。

虽然为了便于今后查找，而需要花费时间和经历将物品的存放位置记录在手册中，但这件事情完全可以放在空闲时间去做。而在存放物品时，如果能不用顾忌其他而有限无条件地将物品放入抽屉，则会在很大程度上减轻存放时的负担。

**数据和索引分别独立存储的数据存储结构具有非常重要的意义。**

表和索引互相分离、各自作为不同的对象存储是关系型数据库中最常见的数据存储方式。尽管这种存储方式有一些缺点，但是它在有效管理海量数据方面却是最佳方式。

### 1.1.1 堆表的结构

数据由一个个的Block构成，每个Block按照预先设定的未使用空间比例值（PCTFREE）和已使用空间比例（PCTUSED）来确定该数据块是否进入Free List中。被放入Free List中的Block可以被插入数据。

数据的存储方式完全与数据值之间没有任何联系，只是按照先后顺序无条件地将其插入到数据块中。

如果一个Block不是空的，数据必须被存储在Block中的空余空间里。如果Block中没有可以用来存储一整行数据的连续空间，但又要确保能够把同一行数据存储在这个数据块里时，必须对该数据块中的全部数据执行空间再分配操作（Condensing）。**数据块的下方的Free Space，并不是为插入新数据而预留的空间，而是为修改操作预留的。**它是在定义数据块时，通过设置参数PCTFREE来指定的。

采用随机存储方式虽然在某种程度上减少了数据存储时的代价，但是我们并不只是以存储数据为最终目的，而是以数据的读取和灵活运用为目的，所以绝不能对数据读取时的代价置之不理。

所谓的**表空间（Table Space）**是指逻辑性的存储空间，它就类似于小区所占用的土地
