# 第一章 基础：逻辑和证明

## 1.1 命题逻辑

### 1.1.1 引言

逻辑规则给出数学语句的准确含义，这些规则用来区分有效和无效的数学论证。

逻辑不仅对理解数学推理十分重要，而且在计算机科学中有许多应用。这些逻辑规则用于计算机电路设计、计算机程序构造、程序正确性证明以及许多其他方面。

### 1.1.2 命题

命题是一个或真或假的**陈述语句**，即一个陈述事实的句子，不能即真又假。

如果一个命题是真命题，它的真值为真，用**T**表示；如果他是假命题，其真值为假，用**F**表示。

涉及命题的逻辑领域称为**命题演算**或**命题逻辑**。它最初是2300多年前由古希腊哲学家亚里士多德系统的创建的。

许多数学陈述都是由一个或多个命题组合而来。成为**复合命题**的新命题由已有的命题用逻辑运算组合而来。

**定义1**
令p为一命题，则p的否定表示为¬p（也可以表示成p+上划线），指“不是p所说的情形”。命题¬p读作“非p”。¬p 的真值和p的真值相反。

命题的否定也可以看做否定运算符作用在命题上的结果。

|   p   |  ¬p   |
| :---: | :---: |
|   T   |   F   |
|   F   |   T   |

**定义2**
令p和q为命题。p、q的**合取**用p∧q表示，即命题“p并且q”。当p和q都为真时，p∧q命题为真，否则为假。

|   p   |   q   |  p∧q  |
| :---: | :---: | :---: |
|   T   |   T   |   T   |
|   T   |   F   |   F   |
|   F   |   T   |   F   |
|   F   |   F   |   F   |

**定义3**
令p和q为命题。p、q的**析取**用p∨q表示，即命题“p或q”。当p和q均为假时，p∨q命题为假，否则为真。

|   p   |   q   |  p∨q  |
| :---: | :---: | :---: |
|   T   |   T   |   T   |
|   T   |   F   |   T   |
|   F   |   T   |   T   |
|   F   |   F   |   F   |

**定义4**
令p和q为命题。p和q的异或（记作p⊕q）是这样一个命题：当p和q中恰好只有一个为真时命题为真，否则为假。

|   p   |   q   |  p⊕q  |
| :---: | :---: | :---: |
|   T   |   T   |   F   |
|   T   |   F   |   T   |
|   F   |   T   |   T   |
|   F   |   F   |   F   |

### 1.1.3 条件语句

**定义5**
令p和q为命题。条件语句p→q是命题“如果p，则q”。当p为真而q为假时，条件语句p→q为假，否则为真。在条件语句p→q中，p称为假设（前件、前提），q称为结论（后件）。

条件语句也称为**蕴含**

|   p   |   q   |  p→q  |
| :---: | :---: | :---: |
|   T   |   T   |   T   |
|   T   |   F   |   F   |
|   F   |   T   |   T   |
|   F   |   F   |   T   |

由于条件语句在数学推理中具有很重要的作用，所以表达p→q的术语也能很多。

|   “如果p，则q”   |     “p蕴含q”     |
| :--------------: | :--------------: |
|    “如果p，q”    |     “q仅当p”     |
| “p是q的充分条件” | “q的充分条件是p" |
|     ”q如果p“     |     ”q每当p“     |
| ”p的必要条件是q“ |    ”q由p得出“    |
|    ”q除非¬p“     |

**逆命题、逆否命题与反命题** 由条件语句p→q可以构成一些新的条件语句。特别是三个常见的相关条件语句还拥有特殊的名称。命题q→p称为p→q的**逆命题**，而p→q的**逆否命题**是命题¬p→¬q。命题¬p→q称为p→q的**反命题**。我们发现，三个有p→q衍生的条件语句中，只有逆否命题总是和p→¬q具有相同的真值。

当两个复合命题总是具有相同真值时，我们称它们是**等价的**。一个常见的逻辑错误是假设条件语句的逆或反等价于这个条件语句。

**定义6**
令p和q为命题。双条件语句p↔q是命题”p当且仅当q“。当p和q有同样的真值时，双条件语句为真，否则为假。双条件语句也成为双向蕴含。

|   p   |   q   |  p↔q  |
| :---: | :---: | :---: |
|   T   |   T   |   T   |
|   T   |   F   |   F   |
|   F   |   T   |   F   |
|   F   |   F   |   F   |

一般还有一些其他方式来表达p↔q：

* ”p是q的充分必要条件“；
* ”如果p那么q，反之亦然“；
* ”p当且仅当q”。

双条件语句的最后一种表示方式可以用缩写符号“iff”代替“当且仅当”（if and only if）。注意，p↔q与(p→q)∧(q→p)有完全相同的真值。

**双条件的隐式使用** 应当注意到，在自然语言中双条件并不总是显式地使用。特别是在自然语言中很少使用双条件中的“当且仅当”结构。通常用“如果，那么”或“仅当”结构来表示双蕴含。“当且仅当”的另一部分则是蕴含的。也就是逆命题是蕴含的而没有说明出来。由于自然语言的这种不精确性，所以我们需要对自然语言中的条件语句是否隐含它的逆做出假设。因为数学和逻辑注重精确，所以我们总是区分条件语句p→q和双条件语句p↔q。

### 1.1.4 复合命题的真值表

可以使用合取、析取、条件、双条件以及否定这些逻辑联结词来构造含有一些命题变元的机构复杂的复合命题。可以用真值表来决定这些复合命题的真值。

例如复合命题(p∨¬q)→(p∧q)的真值表

|   p   |   q   |  ¬q   | p∨¬q  |  p∧q  | (p∨¬q)→(p∧q) |
| :---: | :---: | :---: | :---: | :---: | :----------: |
|   T   |   T   |   F   |   T   |   T   |      T       |
|   T   |   F   |   T   |   T   |   F   |      F       |
|   F   |   T   |   F   |   F   |   F   |      T       |
|   F   |   F   |   T   |   T   |   F   |      F       |

### 1.1.5 逻辑运算符的优先级

我们通常使用括号来规定符合命题中的逻辑运算符的作用顺序。为了减少括号的数量，规定了运算符的优先级。

| 运算符 | 优先级 |
| :----: | :----: |
|   ¬    |   1    |
|   ∧    |   2    |
|   ∨    |   3    |
|   →    |   4    |
|   ↔    |   5    |

### 1.1.6 逻辑运算和位运算

如果一个变量的值或为真或为假，则次变量就称为**布尔变量**。

计算机的**位运算**对应于逻辑联结词。只要在运算符的真值表中用1代替T，用0代替F，即可。还可以用符号OR、AND和XOR表示运算符∧、∨和⊕。

## 1.2 命题逻辑的应用

### 1.2.1 引言

逻辑在数学、计算机科学和其他许多学科有着许多重要的应用。数学、自然科学以及自然语言中的语句通常不太准确，甚至有歧义。为了使其精确表达，可以将它们翻译成逻辑语言。

命题逻辑及其规则可用于设计计算机电路、构造计算机程序、验证程序的正确性以及构造专家系统。

### 1.2.2 语句翻译

有许多理由要把语句翻译成命题变量和逻辑联结词构成的表达式。特别是，汉语（以及其他各种人类语言）常有二义性。把语句翻译成复合命题可以消除歧义。注意，这样翻译时也许需要根据语句的含义做一些合理的假设。此外，一旦完成了从语句到逻辑表达式的翻译，我们就可以分析这些逻辑表达式以确定他们的真值，对他们进行操作。并用推理规则对它们进行推理。

**例1**
"你可以在校园访问因特网，仅当你主修计算机科学或者你不是新生"。
我们用命题变元表示语句中的每个成分，并找出他们之间合适的逻辑联结词。
设：a、c、f分别表示“你可以在校园访问因特尔网”、“你主修计算机科学”、“你是个新生”。
上述语句可以译为：(c∨¬f)→a

**例2**
“如果你身高不足120cm，那么你不能乘坐过山车，除非你年满16周岁。”
设：q、r和s分别为“你能乘坐过山车”、“你身高不足120cm”和“你年满16周岁”
得：(r∧¬s)→¬q

### 1.2.3 系统规范说明

在描述硬件系统和软件系统是，将自然语言语句翻译成逻辑表达式是很重要的一部分。系统和软件工程师根据自然语言描述的需求，生成精确而无二义性的规范说明，这些规范说明可以作为系统开发的基础。

**例3**
“当文件系统已满时，不能够发送自动应答”。
设：p和q分别为“文件系统满了”和“发送自动应答”。
得：p→¬q

系统规范说明应该是**一致**的，也就是说，系统规范说明不应该包含可能导致矛盾的相互冲突的需求。当规范说明不一致时，就无法开发出一个满足所有规范说明的系统。

**例4**
“诊断消息存储在缓冲区中或者被重传。”
“诊断消息没有存储在缓冲区中。”
“如果诊断消息存储在缓冲区中，那么它被重传”
设：p为“诊断消息存储在缓冲区中”，q为“诊断消息被重传”。
得：通过真值表可验证上述三个命题是一致的，因为真值相同。

**例5**
如果在例4中加上一个系统规范说明“诊断消息没有被重传”，就会不一致。

### 1.2.4 布尔搜索

逻辑联结词关广泛用于大量信息搜索中，例如搜索网页索引。由于搜索采用命题逻辑的技术，所以称为布尔搜索。

在布尔搜索中，联结词AND用于匹配同时包含两个搜索项的记录，联结词OR用于匹配两个搜索项之一或两项均匹配的记录，而联结词NOT（还有时候写作AND NOT）用于排除某个特定的搜索项。当布尔搜索用来定位可能感兴趣的信息时，经常需要细心安排逻辑联结词的使用。

### 1.2.5 逻辑谜题

可以用逻辑推理解决的谜题称为**逻辑谜题**。求解逻辑谜题是实践逻辑规则的一种最好的方法。同样，用于执行逻辑推理的计算机程序通常也使用著名的逻辑谜题来演示它们的能力。

两个谜题：雷蒙德·斯马亚在文献[Sm78]中提出的谜题，与两个孩子有关的**泥巴孩子谜题**。

### 1.2.6 逻辑电路

命题逻辑可应用于计算机硬件的设计。这是1938年克劳德·香浓首次发表并写在他的MIT硕士论文的。

**逻辑电路**（或**数字电路**）接受输入信号，每个信号1位[或0（关）或1（开）]，产生输出信号，每个1位。

复杂的数字电路可以由三种简单的基本电路：**与门（AND gate）**、**或门（OR gate）**、**非门（NOT gate）**电路构造而来。非门电路也称**逆变器**。

## 1.3 命题等价式

### 1.3.1 引言

数学证明中使用的一个重要步骤是用真值相同的一条语句替换另一条语句。因此，从给定复合命题生成具有相同真值命题的方法广泛使用于数学证明的构造。

**定义1**
一个真值永远是真的复合命题（无论其中出现的命题变元的真值是什么），称为永真式（tautology），也称为重言式。一个真值永远为假的符合命题称为矛盾式（contradiction）。即不是永真式也不是矛盾式的符合命题称为可能式（contingency）。

在数学推理中永真式和矛盾式往往很重要。

|   p   |  ¬p   | p∨¬p  | p∧¬p  |
| :---: | :---: | :---: | :---: |
|   T   |   F   |   T   |   F   |
|   F   |   T   |   T   |   F   |

### 1.3.2 逻辑等价式

在所有可能的情况下都有相同真值的两个复合命题称为**逻辑等价**的。

**定义2**
如果p↔q是永真式，则复合命题p和q称为是逻辑等价的。用记号p≡q表示p和q是逻辑等价的。

非常重要且很有用的逻辑等价式，即¬(p∨q)和¬p∧¬q等价。这个逻辑等价式是两个德·摩根律之一，另一个是¬(p∧q)≡¬p∨¬q。

<table>
    <tr><th>等价式</th><th>名称</th></tr>
    <tr><td>p∧T≡p</td><td rowspan='2' align='center'>恒等率</td></tr>
    <tr><td>p∨F≡p</td></tr>
    <tr><td>p∨T≡T</td><td rowspan='2' align='center'>支配率</td></tr>
    <tr><td>p∧F≡F</td></tr>
    <tr><td>p∨p≡p</td><td rowspan='2' align='center'>幂等率</td></tr>
    <tr><td>p∧p≡p</td></tr>
    <tr><td>¬(¬p)≡p</td><td align='cneter'>双重否定率</td></tr>
    <tr><td>p∨q≡q∨p</td><td rowspan='2' align='center'>交换律</td></tr>
    <tr><td>p∧q≡q∧p</td></tr>
    <tr><td>(p∨q)∨r≡p∨(q∨r)</td><td rowspan='2' align='center'>结合律</td></tr>
    <tr><td>(p∧q)∧r≡p∧(q∧r)</td></tr>
    <tr><td>p∨(q∧r)≡(p∨q)∧(q∨r)</td><td rowspan='2' align='center'>分配率</td></tr>
    <tr><td>p∧(q∨r)≡(p∧q)∨(q∧r)</td></tr>
    <tr><td>¬(p∨q)≡¬p∧¬q</td><td rowspan='2' align='center'>德·摩根率</td></tr>
    <tr><td>¬(p∧q)≡¬p∨¬q</td></tr>
    <tr><td>p∨(p∧q)≡p</td><td rowspan='2' align='center'>吸收率</td></tr>
    <tr><td>p∧(p∨q)≡p</td></tr>
    <tr><td>p∨¬p≡T</td><td rowspan='2' align='center'>否定率</td></tr>
    <tr><td>p∧¬p≡F</td></tr>
</table>

| 条件命题的逻辑等价式 |
|  --------------   |
|p→q≡¬p∨q           |
|p→q≡¬q→¬p          |
|p∨q≡¬p→q           |
|p∧q≡¬(p→¬q)        |
|¬(p→q)≡p∧¬q        |
|(p→q)∧(p→r)≡p→(q∧r)|
|(p→r)∧(q→r)≡(p∨q)→r|
|(p→q)∨(p→r)≡p→(q∨r)|
|(p→r)∨(q→r)≡(p∧q)→r|

|双条件命题的逻辑等价式|
| ---------------- |
|p↔q≡(p→q)∧(q→p)   |
|p↔q≡¬p↔¬q         |
|p↔q≡(p∧q)∨(¬p∧¬q  |
|¬(p↔q)≡p↔¬q       |

### 1.3.3 德·摩根律的运用

称为德·摩根律的两个逻辑等价式非常重要。它告诉我们怎么取合取的否定和析取的否定。

### 1.3.4 构造新的逻辑等价式

复合命题中的一个命题可以用与它逻辑等价的复合命题替换而不改变原复合命题的真值。

### 1.3.5 命题的可满足性

一个复合命题如果存在一个对其变元的真值赋值使其为真，则称其为是**可满足的**。当不存在这样的赋值时，即当复合命题对所有变元的真值赋值都是假的，则复合命题是**不可满足的**。注意，一个复合命题是不可满足的，当且仅当它的否定对有所变元的真值赋值都是真的。也就是说，当且仅当它的否定是永真式。

当我们找到一个特定的使得复合命题为真的真值赋值是，就证明了它是可满足的。这样的一个赋值称为这个特定的可满足性问题的一个**解**。可是，要证明一个复合命题是不可满足的，我们需要证明每一组变元的真值赋值都使其为假。

### 1.3.6 可满足性的应用

在不同领域（如机器人学、软件测试、计算机辅助设计、机器视觉、集成电路设计、计算机网络以及遗传学）中的许多问题都是可以用命题可满足性来建立模型。

### 1.3.7 可满足性问题求解

真值表可以用于判定符合命题是否为可满足的，或者等价地，其否定是否为永真式。但是，这只适用于含有少量变量的复合命题，变量多的命题，即便计算机也无法用真值表来计算。因为有20个变量的真值表有2<sup>20</sup>行，这时候计算机还行，但是1000个变量的真值表可就是2<sup>1000</sup>行了，一台计算机几万亿年之内都不可能。迄今尚没有其他已知的计算过程能使计算机在合理的时间之内判定变量数这么大的复合命题是否为可满足式。可是，在实际应用中某些特定类型的复合命题的可满足性问题求解方法还是有一些进展，比如数独谜题的求解。已经开发出许多计算机程序可以用来求解有实际用用的可满足性问题。

## 1.4 谓词和量词

### 1.4.1 引言

命题逻辑不能表达数学语言和自然语言中所有语句的确切意思，还需要表达能力更强的逻辑，即**谓词逻辑**。

### 1.4.2 谓词

在数学断言、计算机程序以及系统规格说明中经常可以看到含有变量的语句，当变量值未指定时，这些语句既不为真也不为假。

语句“x大于3”有两个部分。第一部分即变量x，是语句的主语。第二部分（**谓词**“大于3”）表明语句的主语具有的一个性质。我们可以用P(x)表示语句“x大于3”，其中P表示谓词“大于3”，而x是变量。语句P(x)也可以说成是命题函数P在x的值。一旦给变量x赋一个值，语句P(x)就成为命题并具有真值。

一般地，涉及n个变量x<sub>1</sub>，x<sub>2</sub>，...，x<sub>n</sub>的语句可以表示成
P(x<sub>1</sub>，x<sub>2</sub>，...，x<sub>n</sub>)
这种形式的语句就是**命题函数**，P也称为**n位谓词**或**n元谓词**。

**前置条件**和**后置条件**
谓词还可以用来验证计算机程序，也就是证明：当给定合法输入时，计算机程序总是能够产生所期望的输出。（注意，除非建立了程序的正确性，否则无论测试了多少次都不能证明程序对所有输入都产生所期望的输出，除非能测试到每个输入值。）描述合法输入的语句叫做**前置条件**，而程序运行的输出应该满足的条件称为**后置条件**。

### 1.4.3 量词

当命题函数中的变量均被赋值时，所得到的语句就变成具有某个真值的命题。还有另外一种被称为**量化**z重要方式，也可以从命题函数生成一个命题。量化表示在何种程度上谓词对于一定范围的个体成立。在自然语言中，*所有*、*某些*、*许多*、*没有*，以及*少量*这些词都可以用在量化上。

**全称量化**
它告诉我们一个谓词在所考虑范围内对每一个个体都为真。

**存在量化**
它告诉我们一个谓词对所考虑范围内的一个或多个个体为真。

处理谓词和量词的逻辑领域称为**谓词演算**。

**全称量词**
许多数学命题断言某一性质对于变量某一特定域内的所有值均为真，这特定域称为变量的**论域**（或**全体域**），时长简称为**域**。这类语句可以用全称量化表示。对特定论域而言P(x)的全称量化是这样一个命题：它断言P(x)对x在其论域中的所有值均为真。

**定义1**
P(x)的全称量化是语句：“P(x)对x在其论域的所有值为真。”

符号∀xP(x)表示P(x)的全称量化，其中∀称为**全称量词**。命题∀xP(x)读作“对所有x，P(x)”或“对每个x，P(x)“。一个使P(x)为假的个体称为∀xP(x)的**反例**。

**存在量词**
许多数学定理断言：有一个个体使得某种性质成立。这类语句可以用存在量化表示。我们可以用存在量化构成这样一个命题：该命题为真当且仅当论域中至少有一个x的值使得P(x)为真。

**定义2**
P(x)的存在量化是命题：”论域中存在一个个体x满足P(x)。”

我们用符号∃xP(x)表示P(x)的存在量化，其中∃称为存在量词。
当使用语句∃xP(x)时，必须指定一个论域。而且，当论域变化时，∃xP(x)的意义也随之改变。如果没有制定论域，那么语句∃xP(x)没有意义。

除了用短语“存在”外，我们也可以用其他方式来表达存在量化，如使用词语“对某些”、“至少有一个”，或“有”。存在量化∃xP(x)可以读作：“有一个x满足P(x)”、“至少有一个x满足P(x)”，或“对某个x，P(x)”。

**唯一性量词**
所有其他量词最常见是**唯一性量词**，用符号∃!或∃<sub>1</sub>表示。∃!xP(x)(或∃<sub>1</sub>xP(x))这种表示法是指“存在一个唯一的x使得P(x)为真”。

唯一性量词是可以避免使用的，通常最好只使用存在量词和全称量词，这样就可以使用这些量词的推理规则。

### 1.4.4 约束论域的量词

在要限定一个量词的论域时经常会采用简写的表示法。在这个表示法里，变量必须满足的条件直接放在量词的后面。

### 1.4.5 量词的优先级

量词∀和∃比命题演算中的所有逻辑运算符都具有更高的优先级。

### 1.4.6 变量绑定
